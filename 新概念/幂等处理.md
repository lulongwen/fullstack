# 幂等

1. 就是针对一个操作，不管做多少次，产生效果或返回的结果都是一样的
2. 任意多次执行所产生的影响均与一次执行的影响相同
   1. 比如发送消息，也应该只发一次，同样的短信如果多次发给用户，用户会崩溃
   2. 比如创建业务订单，一次业务请求只能创建一个，不能出现创建多个订单
   3. 前端对同一表单数据的重复提交，后台应该只会产生一个结果
   4. 比如发起一笔付款请求，应该只扣用户账户一次钱，当遇到网络重发或系统bug重发，也应该只扣一次钱





## 实现幂等的技术方案

1. 查询操作
   1. 查询一次和查询多次，在数据不变的情况下，查询结果是一样的
   2. select是天然的幂等操作
2. 删除操作
   1. 删除操作也是幂等的，删除一次和多次删除都是把数据删除
   2. 删除返回的结果不一样：删除的数据不存在，返回0；删除的数据多条，返回结果多个
3. 唯一索引，防止新增脏数据
4. token机制，防止页面重复提交



幂等参考 https://www.jianshu.com/p/cea3675a590b